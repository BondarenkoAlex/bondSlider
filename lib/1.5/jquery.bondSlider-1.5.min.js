/*
Slider jQuery plugin
Author: Bondarenko Aleksey
Homepage:
*/
(function(a){a.fn.bondSlider=function(b){var c={fade:{fast:"fast",normal:"normal",slow:"slow"},typeLay:{hor:"horizontal",vert:"vertical"},type:{opacity:"opacity",rotator:"rotator"},direct:{next:"next",prev:"prev"},typeBtn:{btn:"btn",navi:"navi",auto:"auto"},speeds:{slow:600,fast:200,normal:400}};var d={autoPlay:true,autoPlayTime:7e3,loop:true,distance:null,activeFrame:0,sizeFrame:1,hideBtn:false,hideBtnOpacity:0,touch:false,touchDst:100,hideBtnSpeed:c.fade.fast,speedOpacity:c.fade.slow,speedRotate:c.fade.slow,typeBtn:c.type.rotator,typeThumb:c.type.rotator,typeAutoPlay:c.type.rotator,typeScroller:c.typeLay.hor,autoPlayDirect:c.direct.next,effBtn:"linear",effThumb:"linear",effAutoPlay:"linear",wrapFrames:"bondWrapFrames",frames:"bondFrames",frame:"bondFrame",navi:"bondNavi",thumb:"bondThumb",next:"bondNext",prev:"bondPrev",disableBtn:"disable",activeThumb:"activeThumb",callbackBtnNavi:null};var b=a.extend(d,b);b.speedOpacity=c.speeds[b.speedOpacity]||b.speedOpacity;b.speedRotate=c.speeds[b.speedRotate]||b.speedRotate;var e=this;var f=e.find("."+b.next);var g=e.find("."+b.prev);var h=e.find("."+b.navi);var i=h.find(" ."+b.thumb);var j=e.find("."+b.wrapFrames);var k=e.find("."+b.frames);var l=e.find("."+b.frame);var m={totalFrames:null,widthCont:null,autoPlayTimer:null,btnOpacity:{next:null,prev:null,navi:null}};var n=function(a,d){if(a==null)return;if(b.typeScroller==c.typeLay.hor)k.stop().animate({left:-a.left},b.speedRotate,d);else if(b.typeScroller==c.typeLay.vert)k.stop().animate({top:-a.top},b.speedRotate,d)};var o=function(a){if(a==null)return;if(b.typeScroller==c.typeLay.hor){setTimeout(function(){k.stop().animate({opacity:0},b.speedOpacity)},0);setTimeout(function(){k.stop().css({left:-a.left})},b.speedOpacity);setTimeout(function(){k.stop().animate({opacity:1},b.speedOpacity)},b.speedOpacity)}else if(b.typeScroller==c.typeLay.vert){setTimeout(function(){k.stop().animate({opacity:0},b.speedOpacity)},0);setTimeout(function(){k.stop().css({top:-a.top})},b.speedOpacity);setTimeout(function(){k.stop().animate({opacity:1},b.speedOpacity)},b.speedOpacity)}};var p=function(d,e){function h(c,d){function h(a){if(!b.loop){if(m.totalFrames==null){g.addClass(b.disableBtn);f.addClass(b.disableBtn)}else{if(a<=0){g.addClass(b.disableBtn);f.removeClass(b.disableBtn)}else if(a>=m.totalFrames-1){f.addClass(b.disableBtn);g.removeClass(b.disableBtn)}else if(a>0&&a<m.totalFrames-1){g.removeClass(b.disableBtn);f.removeClass(b.disableBtn)}}}}h(c);i.not(a(i.get(c))).removeClass(b.activeThumb);a(i.get(c)).addClass(b.activeThumb);var e=a(l.get(c*b.sizeFrame)).position();q(e,d)}function p(a,d){function i(a){if(a==null)return;if(!b.loop){if(b.typeScroller==c.typeLay.hor){if(a.left==0&&k.outerWidth()==j.width()){g.addClass(b.disableBtn);f.addClass(b.disableBtn)}else if(a.left<=0){g.addClass(b.disableBtn);f.removeClass(b.disableBtn)}else if(a.left+j.width()>=k.outerWidth()){f.addClass(b.disableBtn);g.removeClass(b.disableBtn)}else if(a.left>=0&&a.left+j.width()<=k.outerWidth()){f.removeClass(b.disableBtn);g.removeClass(b.disableBtn)}}else if(b.typeScroller==c.typeLay.vert){if(a.top==0&&k.outerHeight()==j.height()){g.addClass(b.disableBtn);f.addClass(b.disableBtn)}else if(a.top<=0){g.addClass(b.disableBtn);f.removeClass(b.disableBtn)}else if(a.top+j.height()>=k.outerHeight()){f.addClass(b.disableBtn);g.removeClass(b.disableBtn)}else if(a.top>=0&&a.top+j.height()<=k.outerHeight()){g.removeClass(b.disableBtn);f.removeClass(b.disableBtn)}}}}var e={};if(a==c.direct.next){if(b.typeScroller==c.typeLay.hor){var h=-k.css("left").replace("px","")+b.distance;if(b.loop){if(-k.css("left").replace("px","")==k.outerWidth()-j.width())e.left=0;else e.left=Math.min(h,k.outerWidth()-j.width())}else e.left=Math.min(h,k.outerWidth()-j.width())}else if(b.typeScroller==c.typeLay.vert){var h=-k.css("top").replace("px","")+b.distance;if(b.loop){if(-k.css("top").replace("px","")==k.outerHeight()-j.height())e.top=0;else e.top=Math.min(h,k.outerHeight()-j.height())}else e.top=Math.min(h,k.outerHeight()-j.height())}}else if(a==c.direct.prev){if(b.typeScroller==c.typeLay.hor){var h=-k.css("left").replace("px","")-b.distance;if(b.loop){if(k.css("left").replace("px","")==0)e.left=k.outerWidth()-j.width();else e.left=Math.max(h,0)}else e.left=Math.max(h,0)}else if(b.typeScroller==c.typeLay.vert){var h=-k.css("top").replace("px","")-b.distance;if(b.loop){if(k.css("top").replace("px","")==0)e.top=k.outerHeight()-j.height();else e.top=Math.max(h,0)}else e.top=Math.max(h,0)}}i(e);q(e,d)}function q(a,d){if(a==null)return;switch(d){case c.typeBtn.btn:if(b.typeBtn==c.type.opacity)o(a);else n(a,jQuery.easing[b.effBtn]==null?"linear":b.effBtn);break;case c.typeBtn.navi:if(b.typeThumb==c.type.opacity)o(a);else n(a,jQuery.easing[b.effThumb]==null?"linear":b.effThumb);break;case c.typeBtn.auto:if(b.typeAutoPlay==c.type.opacity)o(a);else n(a,jQuery.easing[b.effAutoPlay]==null?"linear":b.effAutoPlay);break}}if(typeof d=="number")h(d,e);else if(typeof d=="string")p(d,e)};var q=function(){function d(){function i(d,e,f){var g=0;for(var h=0;h<f;h++){var i=e*f+h;if(d.length-1<i)break;if(b.typeScroller==c.typeLay.hor)g=g+a(d.get(i)).outerWidth();else if(b.typeScroller==c.typeLay.vert)g=g+a(d.get(i)).outerHeight()}return g}var d=0;m.totalFrames=Math.ceil(l.length/b.sizeFrame);var e=l.length%b.sizeFrame;for(var f=0,g=0;f<m.totalFrames;f++){if(b.typeScroller==c.typeLay.hor){var h=i(l,f,b.sizeFrame);m.widthCont=m.widthCont+h}}}function e(){i.each(function(b,c){if(b>m.totalFrames-1)a(c).hide()})}k.css({position:"relative"});j.css({position:"relative"});j.css({overflow:"hidden"});d();e();if(b.hideBtn){if(f!=null){m.btnOpacity.next=f.css("opacity");f.css({opacity:b.hideBtnOpacity})}if(g!=null){m.btnOpacity.prev=g.css("opacity");g.css({opacity:b.hideBtnOpacity})}if(h!=null){m.btnOpacity.navi=h.css("opacity");h.css({opacity:b.hideBtnOpacity})}}if(b.typeScroller==c.typeLay.hor){l.css({"float":"left"});k.width(m.widthCont);p(b.activeFrame)}if(b.typeScroller==c.typeLay.vert){l.css({"float":"none"});p(b.activeFrame)}}();var r=function(){function d(a){if(!(b.distance==null)){p(c.direct.next,c.typeBtn.btn);return}b.activeFrame++;if(b.activeFrame>=m.totalFrames&&(b.loop||m.autoPlayTimer))b.activeFrame=0;else if(b.activeFrame>=m.totalFrames&&!b.loop){b.activeFrame--;return}p(b.activeFrame,a==null?c.typeBtn.btn:a)}function j(a){if(!(b.distance==null)){p(c.direct.prev,c.typeBtn.btn);return}b.activeFrame--;if(b.activeFrame<0&&(b.loop||m.autoPlayTimer))b.activeFrame=m.totalFrames-1;else if(b.activeFrame<0&&!b.loop){b.activeFrame++;return}p(b.activeFrame,a==null?c.typeBtn.btn:a)}function k(){clearInterval(m.autoPlayTimer);delete m.autoPlayTimer}function l(a){if(b.callbackBtnNavi){var c=b.distance==null?b.activeFrame:null;b.callbackBtnNavi(a,c)}}if(b.autoPlay==true){m.autoPlayTimer=setInterval(function(){if(b.autoPlayDirect==c.direct.prev){j(c.typeBtn.auto);l("prev")}else{d(c.typeBtn.auto);l("next")}},b.autoPlayTime)}if(f!=null){f.click(function(a){k();d();a.stopPropagation();l("next");return false})}if(g!=null){g.click(function(a){k();j();a.stopPropagation();l("prev");return false})}if(i!=null){i.each(function(d,e){if(m.totalFrames<=d)return;a(e).click(function(a){k();b.activeFrame=d;p(b.activeFrame,c.typeBtn.navi);a.stopPropagation();l("navi");return false})})}if(b.hideBtn){e.mouseenter(function(){f.stop().animate({opacity:m.btnOpacity.next},b.hideBtnSpeed);g.stop().animate({opacity:m.btnOpacity.prev},b.hideBtnSpeed);h.stop().animate({opacity:m.btnOpacity.navi},b.hideBtnSpeed)});e.mouseleave(function(){f.stop().animate({opacity:b.hideBtnOpacity},b.hideBtnSpeed);g.stop().animate({opacity:b.hideBtnOpacity},b.hideBtnSpeed);h.stop().animate({opacity:b.hideBtnOpacity},b.hideBtnSpeed)})}if(b.touch){e.bind("touchstart",function(a){m.touch.x=a.touches[0].pageX;m.touch.y=a.touches[0].pageY});e.bind("touchmove",function(a){if(m.touch.x&&m.touch.y){if(a.touches[0].pageX-m.touch.x>=b.touchDst||a.touches[0].pageY-m.touch.y>=b.touchDst){f.click();m.touch.x=m.touch.y=null}if(a.touches[0].pageX-m.touch.x<=-b.touchDst||a.touches[0].pageY-m.touch.y<=-b.touchDst){g.click();m.touch.x=m.touch.y=null}}})}}();return this}})(jQuery)