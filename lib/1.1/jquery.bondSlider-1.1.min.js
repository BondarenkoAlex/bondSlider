/*
Slider jQuery plugin
Author: Bondarenko Aleksey
Homepage:
*/
(function(a){a.fn.bondSlider=function(b){var c={fade:{fast:"fast",normal:"normal",slow:"slow"},typeLay:{hor:"horizontal",vert:"vertical"},type:{opacity:"opacity",rotator:"rotator"},direct:{next:"next",prev:"prev"},typeBtn:{btn:"btn",navi:"navi",auto:"auto"},speeds:{slow:600,fast:200,normal:400}};var d={autoPlay:true,autoPlayTime:7e3,loop:true,distance:null,activeFrame:0,sizeFrame:1,speedOpacity:c.fade.slow,speedRotate:c.fade.slow,typeBtn:c.type.rotator,typeThumb:c.type.rotator,typeAutoPlay:c.type.rotator,typeScroller:c.typeLay.hor,autoPlayDirect:c.direct.next,effBtn:"linear",effThumb:"linear",effAutoPlay:"linear",wrapFrames:"bondWrapFrames",frames:"bondFrames",frame:"bondFrame",navi:"bondNavi",thumb:"bondThumb",next:"bondNext",prev:"bondPrev",disableBtn:"disable",activeThumb:"activeThumb"};var b=a.extend(d,b);b.speedOpacity=c.speeds[b.speedOpacity]||b.speedOpacity;b.speedRotate=c.speeds[b.speedRotate]||b.speedRotate;var e=this.find("."+b.next);var f=this.find("."+b.prev);var g=this.find("."+b.navi+" ."+b.thumb);var h=this.find("."+b.wrapFrames);var i=this.find("."+b.frames);var j=this.find("."+b.frame);var k={totalFrames:null,widthCont:null,autoPlayTimer:null};var l=function(a,d){if(a==null)return;if(b.typeScroller==c.typeLay.hor)i.stop().animate({left:-a.left},b.speedRotate,d);else if(b.typeScroller==c.typeLay.vert)i.stop().animate({top:-a.top},b.speedRotate,d)};var m=function(a){if(a==null)return;if(b.typeScroller==c.typeLay.hor){setTimeout(function(){i.stop().animate({opacity:0},b.speedOpacity)},0);setTimeout(function(){i.stop().css({left:-a.left})},b.speedOpacity);setTimeout(function(){i.stop().animate({opacity:1},b.speedOpacity)},b.speedOpacity)}else if(b.typeScroller==c.typeLay.vert){setTimeout(function(){i.stop().animate({opacity:0},b.speedOpacity)},0);setTimeout(function(){i.stop().css({top:-a.top})},b.speedOpacity);setTimeout(function(){i.stop().animate({opacity:1},b.speedOpacity)},b.speedOpacity)}};var n=function(d,n){function q(a,d){if(a==null)return;switch(d){case c.typeBtn.btn:if(b.typeBtn==c.type.opacity)m(a);else l(a,jQuery.easing[b.effBtn]==null?"linear":b.effBtn);break;case c.typeBtn.navi:if(b.typeThumb==c.type.opacity)m(a);else l(a,jQuery.easing[b.effThumb]==null?"linear":b.effThumb);break;case c.typeBtn.auto:if(b.typeAutoPlay==c.type.opacity)m(a);else l(a,jQuery.easing[b.effAutoPlay]==null?"linear":b.effAutoPlay);break}}function p(a,d){function k(a){if(a==null)return;if(!b.loop){if(b.typeScroller==c.typeLay.hor){if(a.left==0&&i.outerWidth()==h.width()){f.addClass(b.disableBtn);e.addClass(b.disableBtn)}else if(a.left<=0){f.addClass(b.disableBtn);e.removeClass(b.disableBtn)}else if(a.left+h.width()>=i.outerWidth()){e.addClass(b.disableBtn);f.removeClass(b.disableBtn)}else if(a.left>=0&&a.left+h.width()<=i.outerWidth()){e.removeClass(b.disableBtn);f.removeClass(b.disableBtn)}}else if(b.typeScroller==c.typeLay.vert){if(a.top==0&&i.outerHeight()==h.height()){f.addClass(b.disableBtn);e.addClass(b.disableBtn)}else if(a.top<=0){f.addClass(b.disableBtn);e.removeClass(b.disableBtn)}else if(a.top+h.height()>=i.outerHeight()){e.addClass(b.disableBtn);f.removeClass(b.disableBtn)}else if(a.top>=0&&a.top+h.height()<=i.outerHeight()){f.removeClass(b.disableBtn);e.removeClass(b.disableBtn)}}}}var g={};if(a==c.direct.next){if(b.typeScroller==c.typeLay.hor){var j=-i.css("left").replace("px","")+b.distance;if(b.loop){if(-i.css("left").replace("px","")==i.outerWidth()-h.width())g.left=0;else g.left=Math.min(j,i.outerWidth()-h.width())}else g.left=Math.min(j,i.outerWidth()-h.width())}else if(b.typeScroller==c.typeLay.vert){var j=-i.css("top").replace("px","")+b.distance;if(b.loop){if(-i.css("top").replace("px","")==i.outerHeight()-h.height())g.top=0;else g.top=Math.min(j,i.outerHeight()-h.height())}else g.top=Math.min(j,i.outerHeight()-h.height())}}else if(a==c.direct.prev){if(b.typeScroller==c.typeLay.hor){var j=-i.css("left").replace("px","")-b.distance;if(b.loop){if(i.css("left").replace("px","")==0)g.left=i.outerWidth()-h.width();else g.left=Math.max(j,0)}else g.left=Math.max(j,0)}else if(b.typeScroller==c.typeLay.vert){var j=-i.css("top").replace("px","")-b.distance;if(b.loop){if(i.css("top").replace("px","")==0)g.top=i.outerHeight()-h.height();else g.top=Math.max(j,0)}else g.top=Math.max(j,0)}}k(g);q(g,d)}function o(c,d){function i(a){if(!b.loop){if(k.totalFrames==null){f.addClass(b.disableBtn);e.addClass(b.disableBtn)}else{if(a<=0){f.addClass(b.disableBtn);e.removeClass(b.disableBtn)}else if(a>=k.totalFrames-1){e.addClass(b.disableBtn);f.removeClass(b.disableBtn)}else if(a>0&&a<k.totalFrames-1){f.removeClass(b.disableBtn);e.removeClass(b.disableBtn)}}}}i(c);g.not(a(g.get(c))).removeClass(b.activeThumb);a(g.get(c)).addClass(b.activeThumb);var h=a(j.get(c*b.sizeFrame)).position();q(h,d)}if(typeof d=="number")o(d,n);else if(typeof d=="string")p(d,n)};var o=function(){function e(){g.each(function(b,c){if(b>k.totalFrames-1)a(c).hide()})}function d(){function n(d,e,f){var g=0;for(var h=0;h<f;h++){var i=e*f+h;if(d.length-1<i)break;if(b.typeScroller==c.typeLay.hor)g=g+a(d.get(i)).outerWidth();else if(b.typeScroller==c.typeLay.vert)g=g+a(d.get(i)).outerHeight()}return g}var d=0;var e=0;var f=Math.ceil(j.length/b.sizeFrame);var g=j.length%b.sizeFrame;for(var i=f-1,l=0;i>=0;i--){if(b.typeScroller==c.typeLay.hor){var m=n(j,i,b.sizeFrame);k.widthCont=k.widthCont+m;d=d+m;if(d<=h.width()||i==f-1){k.totalFrames=i+1}}else if(b.typeScroller==c.typeLay.vert){e=e+n(j,i,b.sizeFrame);if(e<=h.height()||i==f-1){k.totalFrames=i+1}}}}i.css({position:"relative"});h.css({position:"relative"});h.css({overflow:"hidden"});d();e();if(b.typeScroller==c.typeLay.hor){j.css({"float":"left"});i.width(k.widthCont);n(b.activeFrame,c.typeBtn.btn)}if(b.typeScroller==c.typeLay.vert){j.css({"float":"none"});n(b.activeFrame,c.typeBtn.btn)}}();var p=function(){function i(){clearInterval(k.autoPlayTimer);delete k.autoPlayTimer}function h(a){if(!(b.distance==null)){n(c.direct.prev,c.typeBtn.btn);return}b.activeFrame--;if(b.activeFrame<0&&(b.loop||k.autoPlayTimer))b.activeFrame=k.totalFrames-1;else if(b.activeFrame<0&&!b.loop){b.activeFrame++;return}n(b.activeFrame,a==null?c.typeBtn.btn:a)}function d(a){if(!(b.distance==null)){n(c.direct.next,c.typeBtn.btn);return}b.activeFrame++;if(b.activeFrame>=k.totalFrames&&(b.loop||k.autoPlayTimer))b.activeFrame=0;else if(b.activeFrame>=k.totalFrames&&!b.loop){b.activeFrame--;return}n(b.activeFrame,a==null?c.typeBtn.btn:a)}if(b.autoPlay==true){k.autoPlayTimer=setInterval(function(){b.autoPlayDirect==c.direct.prev?h(c.typeBtn.auto):d(c.typeBtn.auto)},b.autoPlayTime)}if(e!=null){e.click(function(a){i();d();a.stopPropagation();return false})}if(f!=null){f.click(function(a){i();h();a.stopPropagation();return false})}if(g!=null){g.each(function(d,e){if(k.totalFrames<=d)return;a(e).click(function(a){i();b.activeFrame=d;n(b.activeFrame,c.typeBtn.navi);a.stopPropagation();return false})})}}();return this}})(jQuery)